{"version":3,"file":"background.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://rapid-devtools/./src/service-worker/background.js"],"sourcesContent":["/*global chrome*/\n\nvar connections = {};\n\n// Receive message from content script and relay to the devTools page for the\n// current tab\nchrome.runtime.onMessage.addListener(function(request, sender, sendResponse) {\n  console.log('incoming message from injected script');\n  console.log(request);\n\n  // Messages from content scripts should have sender.tab set\n  if (sender.tab) {\n    var tabId = sender.tab.id;\n    if (tabId in connections) {\n      connections[tabId].postMessage(request);\n    } else {\n      console.log(\"Tab not found in connection list.\");\n    }\n  } else {\n    console.log(\"sender.tab not defined.\");\n  }\n  return true;\n});\n\nchrome.runtime.onConnect.addListener(function(port) {\n\n  // Listen to messages sent from the DevTools page\n  port.onMessage.addListener(function(request) {\n    console.log('incoming message from dev tools page');\n    console.log(request)\n\n    // Register initial connection\n    if (request.name == 'init') {\n      connections[request.tabId] = port;\n\n      port.onDisconnect.addListener(function() {\n        delete connections[request.tabId];\n      });\n\n      return;\n    }\n  });\n\n});\n\n//Service workers do not persist\n//Bug exploit to keep service worker alive indefintiely\n//https://stackoverflow.com/questions/66618136/persistent-service-worker-in-chrome-extension\nconst keepAlive = () => setInterval(chrome.runtime.getPlatformInfo, 20e3);\nchrome.runtime.onStartup.addListener(keepAlive);\nkeepAlive();"],"names":[],"sourceRoot":""}